---
layout: default
title: Dataset Previewer
permalink: /tools/dataset-preview.html
---

<style>
  .tool-wrapper {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
    line-height: 1.6;
    color: #fff;
  }

  input[type="file"] {
    margin-top: 1rem;
    padding: 8px;
    background: #1e1e1e;
    color: white;
    border: 1px solid #444;
    border-radius: 5px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
    background-color: #1e1e1e;
    color: #fff;
  }

  th, td {
    border: 1px solid #444;
    padding: 8px;
    font-size: 0.9rem;
  }

  th {
    background-color: #333;
  }

  .meta {
    background: #2a2a2a;
    padding: 1rem;
    margin-top: 1rem;
    border-left: 4px solid #4CAF50;
    border-radius: 6px;
  }
</style>

<div class="tool-wrapper">
  <h1>Dataset Previewer</h1>
  <p>Upload a CSV file to preview its structure and sample rows.</p>
  <input type="file" accept=".csv" onchange="previewDataset(event)" />

  <div class="meta" id="fileMeta" style="display: none;"></div>
  <div id="csvPreview"></div>
</div>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>


<script>
  function previewDataset(event) {
    const file = event.target.files[0];
    if (!file) return;

    const isZip = file.name.endsWith('.zip');
    const isCSV = file.name.endsWith('.csv');

    if (isCSV) {
      handleCSV(file, file.name);
    } else if (isZip) {
      handleZip(file);
    } else {
      alert("Please upload a .csv or .zip file");
    }
  }

  function handleCSV(file, displayName) {
    const reader = new FileReader();
    reader.onload = function (e) {
      const csvText = e.target.result;
      displayCSV(csvText, displayName);
    };
    reader.readAsText(file);
  }

  function handleZip(file) {
    JSZip.loadAsync(file).then(zip => {
      const csvFile = Object.keys(zip.files).find(name => name.endsWith('.csv'));
      if (!csvFile) {
        alert("No .csv file found in the .zip");
        return;
      }

      zip.files[csvFile].async("string").then(content => {
        displayCSV(content, csvFile);
      });
    });
  }

  function detectType(values) {
    const numRegex = /^-?\d+(\.\d+)?$/;
    const dateRegex = /^\d{4}-\d{2}-\d{2}$/;

    let type = "string";
    let numCount = 0, dateCount = 0;

    values.forEach(v => {
      const val = v.trim();
      if (numRegex.test(val)) numCount++;
      if (dateRegex.test(val)) dateCount++;
    });

    if (numCount >= values.length * 0.6) return "number";
    if (dateCount >= values.length * 0.6) return "date";
    return "string";
  }

  function displayCSV(csvText, fileName) {
    const rows = csvText.trim().split("\n").map(row => row.split(","));
    const headers = rows[0];
    const previewRows = rows.slice(1, 6);

    // Detect column types
    const sampleCols = headers.map((_, colIdx) => previewRows.map(r => r[colIdx] || ""));
    const types = sampleCols.map(col => detectType(col));

    document.getElementById("fileMeta").style.display = "block";
    document.getElementById("fileMeta").innerHTML = `
      <strong>File Name:</strong> ${fileName}<br>
      <strong>Columns:</strong> ${headers.length}<br>
      <strong>Rows:</strong> ~${rows.length - 1} (first 5 shown)<br>
    `;

    const table = document.createElement("table");
    table.innerHTML = `
      <thead>
        <tr>${headers.map(h => `<th>${h}</th>`).join("")}</tr>
        <tr>${types.map(t => `<th style="font-weight:normal;font-size:0.8em;">${t}</th>`).join("")}</tr>
      </thead>
      <tbody>
        ${previewRows.map(r => `<tr>${r.map(c => `<td>${c}</td>`).join("")}</tr>`).join("")}
      </tbody>
    `;

    const preview = document.getElementById("csvPreview");
    preview.innerHTML = "";
    preview.appendChild(table);
  }
</script>
